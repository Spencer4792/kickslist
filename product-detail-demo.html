<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Detail | KicksList</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,400;1,500&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* Include the CSS directly for demo purposes */
        /*
         * KicksList Product Detail - Luxury Aesthetic
         * Inspired by GOAT and Louis Vuitton
         */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .kl-product-detail {
            --kl-font-display: 'Cormorant Garamond', 'Times New Roman', serif;
            --kl-font-body: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'Segoe UI', sans-serif;

            /* Sophisticated neutrals */
            --kl-bg-primary: #fafaf9;
            --kl-bg-secondary: #ffffff;
            --kl-bg-tertiary: #f5f4f2;
            --kl-bg-accent: #f0efed;

            /* Text hierarchy */
            --kl-text-primary: #1a1917;
            --kl-text-secondary: #57534e;
            --kl-text-tertiary: #a8a29e;
            --kl-text-muted: #d6d3d1;

            /* Borders */
            --kl-border-light: #e7e5e4;
            --kl-border-medium: #d6d3d1;
            --kl-border-dark: #a8a29e;

            /* Accents */
            --kl-accent-gold: #b5a191;
            --kl-accent-dark: #292524;

            /* Shadows */
            --kl-shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04);
            --kl-shadow-md: 0 4px 12px rgba(0, 0, 0, 0.06);
            --kl-shadow-lg: 0 12px 40px rgba(0, 0, 0, 0.08);
            --kl-shadow-xl: 0 24px 80px rgba(0, 0, 0, 0.12);

            /* Transitions */
            --kl-transition-fast: 150ms ease;
            --kl-transition-base: 250ms ease;
            --kl-transition-slow: 400ms cubic-bezier(0.4, 0, 0.2, 1);
        }

        .kl-product-detail {
            background: var(--kl-bg-primary);
            min-height: 100vh;
            font-family: var(--kl-font-body);
            color: var(--kl-text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Breadcrumb */
        .kl-breadcrumb {
            padding: 1.5rem 3rem;
            font-size: 0.75rem;
            letter-spacing: 0.04em;
            border-bottom: 1px solid var(--kl-border-light);
            background: var(--kl-bg-secondary);
        }

        .kl-breadcrumb a {
            color: var(--kl-text-tertiary);
            text-decoration: none;
            transition: color var(--kl-transition-fast);
        }

        .kl-breadcrumb a:hover {
            color: var(--kl-text-primary);
        }

        .kl-breadcrumb-sep {
            margin: 0 0.75rem;
            color: var(--kl-text-muted);
        }

        .kl-breadcrumb-current {
            color: var(--kl-text-secondary);
        }

        /* Main Layout */
        .kl-product-main {
            display: grid;
            grid-template-columns: 1.15fr 1fr;
            gap: 0;
            max-width: 1600px;
            margin: 0 auto;
            background: var(--kl-bg-secondary);
        }

        @media (max-width: 1024px) {
            .kl-product-main {
                grid-template-columns: 1fr;
            }
        }

        /* Gallery */
        .kl-gallery {
            display: flex;
            gap: 1rem;
            padding: 2.5rem;
            position: sticky;
            top: 0;
            height: fit-content;
            background: var(--kl-bg-secondary);
        }

        @media (max-width: 1024px) {
            .kl-gallery {
                position: relative;
                flex-direction: column-reverse;
                padding: 1.5rem;
            }
        }

        .kl-gallery-thumbnails {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            flex-shrink: 0;
        }

        @media (max-width: 1024px) {
            .kl-gallery-thumbnails {
                flex-direction: row;
                justify-content: center;
                overflow-x: auto;
                padding-bottom: 0.5rem;
            }
        }

        .kl-thumbnail {
            width: 72px;
            height: 72px;
            padding: 0.5rem;
            background: var(--kl-bg-tertiary);
            border: 1px solid var(--kl-border-light);
            cursor: pointer;
            transition: all var(--kl-transition-base);
            flex-shrink: 0;
        }

        .kl-thumbnail:hover {
            border-color: var(--kl-border-dark);
        }

        .kl-thumbnail.active {
            border-color: var(--kl-text-primary);
        }

        .kl-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .kl-main-image {
            flex: 1;
            position: relative;
            background: var(--kl-bg-tertiary);
            aspect-ratio: 1;
            cursor: zoom-in;
            overflow: hidden;
        }

        .kl-image-container {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            background-size: 200%;
            background-repeat: no-repeat;
            transition: background-position 0s;
        }

        .kl-main-image.zoomed .kl-image-container {
            cursor: zoom-in;
        }

        .kl-image-container img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            transition: opacity var(--kl-transition-fast);
        }

        .kl-image-container img.hidden {
            opacity: 0;
        }

        .kl-expand-btn {
            position: absolute;
            bottom: 1.25rem;
            right: 1.25rem;
            width: 40px;
            height: 40px;
            background: var(--kl-bg-secondary);
            border: 1px solid var(--kl-border-light);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--kl-transition-base);
            opacity: 0;
        }

        .kl-main-image:hover .kl-expand-btn {
            opacity: 1;
        }

        .kl-expand-btn:hover {
            background: var(--kl-text-primary);
            border-color: var(--kl-text-primary);
        }

        .kl-expand-btn svg {
            width: 18px;
            height: 18px;
            color: var(--kl-text-primary);
            transition: color var(--kl-transition-fast);
        }

        .kl-expand-btn:hover svg {
            color: white;
        }

        .kl-image-counter {
            position: absolute;
            bottom: 1.25rem;
            left: 1.25rem;
            font-size: 0.7rem;
            letter-spacing: 0.1em;
            color: var(--kl-text-tertiary);
            background: var(--kl-bg-secondary);
            padding: 0.4rem 0.75rem;
            border: 1px solid var(--kl-border-light);
        }

        /* Product Info */
        .kl-product-info {
            padding: 3rem 4rem 4rem 2rem;
            border-left: 1px solid var(--kl-border-light);
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        @media (max-width: 1024px) {
            .kl-product-info {
                padding: 2rem 1.5rem 3rem;
                border-left: none;
                border-top: 1px solid var(--kl-border-light);
            }
        }

        .kl-info-header {
            border-bottom: 1px solid var(--kl-border-light);
            padding-bottom: 2rem;
        }

        .kl-brand {
            font-size: 0.7rem;
            font-weight: 500;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--kl-text-tertiary);
            margin-bottom: 0.75rem;
        }

        .kl-product-name {
            font-family: var(--kl-font-display);
            font-size: clamp(1.75rem, 3vw, 2.25rem);
            font-weight: 400;
            line-height: 1.2;
            color: var(--kl-text-primary);
            margin-bottom: 0.75rem;
        }

        .kl-style-id {
            font-size: 0.8rem;
            color: var(--kl-text-tertiary);
            letter-spacing: 0.02em;
        }

        .kl-price-block {
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--kl-border-light);
        }

        .kl-price-row {
            display: flex;
            align-items: baseline;
            gap: 1rem;
        }

        .kl-price-current {
            font-family: var(--kl-font-display);
            font-size: 2rem;
            font-weight: 500;
            color: var(--kl-text-primary);
            letter-spacing: -0.01em;
        }

        .kl-price-retail {
            font-size: 0.95rem;
            color: var(--kl-text-tertiary);
            text-decoration: line-through;
        }

        .kl-price-note {
            font-size: 0.75rem;
            color: var(--kl-text-tertiary);
            margin-top: 0.5rem;
        }

        /* Size Section */
        .kl-size-section {
            padding-bottom: 1.5rem;
        }

        .kl-size-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .kl-size-label {
            font-size: 0.7rem;
            font-weight: 500;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--kl-text-primary);
        }

        .kl-size-guide {
            background: none;
            border: none;
            font-size: 0.75rem;
            color: var(--kl-text-tertiary);
            text-decoration: underline;
            text-underline-offset: 2px;
            cursor: pointer;
            transition: color var(--kl-transition-fast);
        }

        .kl-size-guide:hover {
            color: var(--kl-text-primary);
        }

        .kl-size-selector {
            position: relative;
        }

        .kl-size-dropdown {
            width: 100%;
            padding: 1rem 3rem 1rem 1.25rem;
            font-family: var(--kl-font-body);
            font-size: 0.9rem;
            color: var(--kl-text-primary);
            background: var(--kl-bg-secondary);
            border: 1px solid var(--kl-border-medium);
            appearance: none;
            cursor: pointer;
            transition: border-color var(--kl-transition-fast);
        }

        .kl-size-dropdown:focus {
            outline: none;
            border-color: var(--kl-text-primary);
        }

        .kl-size-dropdown option:disabled {
            color: var(--kl-text-muted);
        }

        .kl-dropdown-arrow {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            color: var(--kl-text-tertiary);
            pointer-events: none;
        }

        .kl-out-of-stock-msg {
            font-size: 0.85rem;
            color: var(--kl-text-tertiary);
            font-style: italic;
        }

        /* Action Buttons */
        .kl-actions {
            display: flex;
            gap: 0.75rem;
        }

        .kl-add-to-bag {
            flex: 1;
            padding: 1.15rem 2rem;
            font-family: var(--kl-font-body);
            font-size: 0.75rem;
            font-weight: 500;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: white;
            background: var(--kl-text-primary);
            border: 1px solid var(--kl-text-primary);
            cursor: pointer;
            transition: all var(--kl-transition-base);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .kl-add-to-bag:hover:not(.disabled) {
            background: var(--kl-accent-dark);
        }

        .kl-add-to-bag.disabled {
            background: var(--kl-text-muted);
            border-color: var(--kl-text-muted);
            cursor: not-allowed;
        }

        .kl-add-to-bag.added {
            background: #166534;
            border-color: #166534;
        }

        .kl-add-to-bag svg {
            width: 16px;
            height: 16px;
        }

        .kl-notify-btn {
            flex: 1;
            padding: 1.15rem 2rem;
            font-family: var(--kl-font-body);
            font-size: 0.75rem;
            font-weight: 500;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--kl-text-primary);
            background: var(--kl-bg-secondary);
            border: 1px solid var(--kl-border-medium);
            cursor: pointer;
            transition: all var(--kl-transition-base);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }

        .kl-notify-btn:hover {
            border-color: var(--kl-text-primary);
            background: var(--kl-bg-tertiary);
        }

        .kl-notify-btn svg {
            width: 18px;
            height: 18px;
        }

        .kl-notify-form {
            flex: 1;
            display: flex;
            gap: 0;
        }

        .kl-notify-input {
            flex: 1;
            padding: 1rem 1.25rem;
            font-family: var(--kl-font-body);
            font-size: 0.85rem;
            border: 1px solid var(--kl-border-medium);
            border-right: none;
            background: var(--kl-bg-secondary);
            transition: border-color var(--kl-transition-fast);
        }

        .kl-notify-input:focus {
            outline: none;
            border-color: var(--kl-text-primary);
        }

        .kl-notify-input::placeholder {
            color: var(--kl-text-tertiary);
        }

        .kl-notify-submit {
            padding: 1rem 1.5rem;
            font-family: var(--kl-font-body);
            font-size: 0.7rem;
            font-weight: 500;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: white;
            background: var(--kl-text-primary);
            border: 1px solid var(--kl-text-primary);
            cursor: pointer;
            transition: background var(--kl-transition-fast);
            white-space: nowrap;
        }

        .kl-notify-submit:hover {
            background: var(--kl-accent-dark);
        }

        .kl-wishlist-btn {
            width: 52px;
            height: 52px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--kl-bg-secondary);
            border: 1px solid var(--kl-border-medium);
            cursor: pointer;
            transition: all var(--kl-transition-base);
            flex-shrink: 0;
        }

        .kl-wishlist-btn:hover {
            border-color: var(--kl-text-primary);
        }

        .kl-wishlist-btn:hover svg {
            fill: var(--kl-text-primary);
        }

        .kl-wishlist-btn svg {
            width: 20px;
            height: 20px;
            color: var(--kl-text-primary);
            transition: fill var(--kl-transition-fast);
        }

        /* Trust Badges */
        .kl-trust-badges {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            padding: 1.5rem 0;
            border-top: 1px solid var(--kl-border-light);
            border-bottom: 1px solid var(--kl-border-light);
        }

        .kl-badge {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: var(--kl-text-secondary);
            font-size: 0.8rem;
        }

        .kl-badge svg {
            width: 18px;
            height: 18px;
            color: var(--kl-accent-gold);
            flex-shrink: 0;
        }

        /* Specifications */
        .kl-specs {
            padding-top: 0.5rem;
        }

        .kl-specs-title {
            font-size: 0.7rem;
            font-weight: 500;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--kl-text-primary);
            margin-bottom: 1.25rem;
        }

        .kl-specs-list {
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        .kl-spec-row {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--kl-border-light);
        }

        .kl-spec-row:last-child {
            border-bottom: none;
        }

        .kl-spec-row dt {
            font-size: 0.8rem;
            color: var(--kl-text-tertiary);
        }

        .kl-spec-row dd {
            font-size: 0.8rem;
            color: var(--kl-text-primary);
            font-weight: 500;
        }

        /* Description */
        .kl-description {
            padding-top: 1rem;
            border-top: 1px solid var(--kl-border-light);
        }

        .kl-description-title {
            font-size: 0.7rem;
            font-weight: 500;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--kl-text-primary);
            margin-bottom: 1rem;
        }

        .kl-description-text {
            font-size: 0.9rem;
            line-height: 1.7;
            color: var(--kl-text-secondary);
        }

        /* Related Products */
        .kl-related {
            padding: 5rem 3rem;
            background: var(--kl-bg-primary);
            border-top: 1px solid var(--kl-border-light);
        }

        @media (max-width: 768px) {
            .kl-related {
                padding: 3rem 1.5rem;
            }
        }

        .kl-related-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2.5rem;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--kl-border-light);
        }

        .kl-related-title {
            font-family: var(--kl-font-display);
            font-size: 1.75rem;
            font-weight: 400;
            color: var(--kl-text-primary);
        }

        .kl-related-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.75rem;
            font-weight: 500;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--kl-text-tertiary);
            text-decoration: none;
            transition: color var(--kl-transition-fast);
        }

        .kl-related-link:hover {
            color: var(--kl-text-primary);
        }

        .kl-related-link svg {
            width: 16px;
            height: 16px;
        }

        .kl-related-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        @media (max-width: 1200px) {
            .kl-related-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 900px) {
            .kl-related-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 500px) {
            .kl-related-grid {
                grid-template-columns: 1fr;
            }
        }

        .kl-related-card {
            background: var(--kl-bg-secondary);
            border: 1px solid var(--kl-border-light);
            text-decoration: none;
            transition: all var(--kl-transition-base);
        }

        .kl-related-card:hover {
            box-shadow: var(--kl-shadow-lg);
            transform: translateY(-2px);
        }

        .kl-related-card:hover .kl-related-image-wrap img {
            transform: scale(1.03);
        }

        .kl-related-image-wrap {
            aspect-ratio: 1;
            background: var(--kl-bg-tertiary);
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
            position: relative;
        }

        .kl-related-image-wrap img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            transition: transform var(--kl-transition-slow);
        }

        .kl-related-badge {
            position: absolute;
            top: 0.75rem;
            left: 0.75rem;
            padding: 0.3rem 0.6rem;
            font-size: 0.6rem;
            font-weight: 600;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            background: var(--kl-bg-accent);
            color: var(--kl-text-tertiary);
        }

        .kl-related-info {
            padding: 1.25rem;
            border-top: 1px solid var(--kl-border-light);
        }

        .kl-related-brand {
            font-size: 0.65rem;
            font-weight: 500;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--kl-text-tertiary);
            margin-bottom: 0.4rem;
        }

        .kl-related-name {
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--kl-text-primary);
            margin-bottom: 0.5rem;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .kl-related-price {
            font-family: var(--kl-font-display);
            font-size: 1rem;
            font-weight: 500;
            color: var(--kl-text-primary);
        }

        /* Lightbox */
        .kl-lightbox {
            position: fixed;
            inset: 0;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            animation: kl-fade-in 0.3s ease;
        }

        @keyframes kl-fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .kl-lightbox-close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            width: 48px;
            height: 48px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--kl-transition-fast);
            z-index: 10;
        }

        .kl-lightbox-close:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.4);
        }

        .kl-lightbox-close svg {
            width: 24px;
            height: 24px;
            color: white;
        }

        .kl-lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 56px;
            height: 56px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--kl-transition-fast);
            z-index: 10;
        }

        .kl-lightbox-nav:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.4);
        }

        .kl-lightbox-nav svg {
            width: 24px;
            height: 24px;
            color: white;
        }

        .kl-lightbox-nav.prev {
            left: 2rem;
        }

        .kl-lightbox-nav.next {
            right: 2rem;
        }

        @media (max-width: 768px) {
            .kl-lightbox-nav {
                width: 44px;
                height: 44px;
            }

            .kl-lightbox-nav.prev {
                left: 1rem;
            }

            .kl-lightbox-nav.next {
                right: 1rem;
            }
        }

        .kl-lightbox-content {
            max-width: 85vw;
            max-height: 75vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .kl-lightbox-content img {
            max-width: 100%;
            max-height: 75vh;
            object-fit: contain;
            animation: kl-scale-in 0.3s ease;
        }

        @keyframes kl-scale-in {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .kl-lightbox-thumbnails {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 0.5rem;
            z-index: 10;
        }

        .kl-lightbox-thumb {
            width: 56px;
            height: 56px;
            padding: 0.35rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all var(--kl-transition-fast);
            opacity: 0.6;
        }

        .kl-lightbox-thumb:hover,
        .kl-lightbox-thumb.active {
            opacity: 1;
            border-color: rgba(255, 255, 255, 0.6);
        }

        .kl-lightbox-thumb.active {
            border-color: white;
        }

        .kl-lightbox-thumb img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .kl-lightbox-counter {
            position: absolute;
            bottom: 2rem;
            right: 2rem;
            font-size: 0.75rem;
            letter-spacing: 0.1em;
            color: rgba(255, 255, 255, 0.6);
        }

        /* Responsive */
        @media (max-width: 640px) {
            .kl-breadcrumb {
                padding: 1rem 1.5rem;
                font-size: 0.7rem;
            }

            .kl-gallery {
                padding: 1rem;
            }

            .kl-thumbnail {
                width: 56px;
                height: 56px;
            }

            .kl-product-info {
                padding: 1.5rem;
                gap: 1.5rem;
            }

            .kl-product-name {
                font-size: 1.5rem;
            }

            .kl-price-current {
                font-size: 1.75rem;
            }

            .kl-actions {
                flex-direction: column;
            }

            .kl-wishlist-btn {
                width: 100%;
                height: 48px;
            }

            .kl-trust-badges {
                gap: 0.5rem;
            }

            .kl-lightbox-thumbnails {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useCallback, useEffect } = React;

        /**
         * ProductDetail Component
         * A luxury-styled product detail page for KicksList
         */
        const ProductDetail = ({
            product,
            relatedProducts = [],
            onAddToBag,
            onNotifyMe,
        }) => {
            const [selectedImage, setSelectedImage] = useState(0);
            const [selectedSize, setSelectedSize] = useState('');
            const [isZoomed, setIsZoomed] = useState(false);
            const [zoomPosition, setZoomPosition] = useState({ x: 50, y: 50 });
            const [lightboxOpen, setLightboxOpen] = useState(false);
            const [notifyEmail, setNotifyEmail] = useState('');
            const [showNotifyForm, setShowNotifyForm] = useState(false);
            const [addedToBag, setAddedToBag] = useState(false);

            const {
                name,
                brand,
                model,
                styleId,
                price,
                retail,
                condition = 'New',
                releaseYear,
                description,
                images = [],
                sizes = [],
                inStock,
            } = product;

            const availableSizes = sizes.filter(s => s.available);
            const hasStock = inStock && availableSizes.length > 0;

            const handleImageHover = useCallback((e) => {
                if (!isZoomed) return;
                const rect = e.currentTarget.getBoundingClientRect();
                const x = ((e.clientX - rect.left) / rect.width) * 100;
                const y = ((e.clientY - rect.top) / rect.height) * 100;
                setZoomPosition({ x, y });
            }, [isZoomed]);

            const handleAddToBag = useCallback(() => {
                if (!selectedSize) return;
                setAddedToBag(true);
                onAddToBag?.({ ...product, selectedSize });
                setTimeout(() => setAddedToBag(false), 2000);
            }, [selectedSize, product, onAddToBag]);

            const handleNotifySubmit = useCallback((e) => {
                e.preventDefault();
                onNotifyMe?.({ productId: product.id, email: notifyEmail });
                setShowNotifyForm(false);
                setNotifyEmail('');
                alert(`You'll be notified when ${name} is back in stock!`);
            }, [notifyEmail, product.id, name, onNotifyMe]);

            const handleKeyDown = useCallback((e) => {
                if (!lightboxOpen) return;
                if (e.key === 'Escape') setLightboxOpen(false);
                if (e.key === 'ArrowRight') setSelectedImage((prev) => (prev + 1) % images.length);
                if (e.key === 'ArrowLeft') setSelectedImage((prev) => (prev - 1 + images.length) % images.length);
            }, [lightboxOpen, images.length]);

            useEffect(() => {
                document.addEventListener('keydown', handleKeyDown);
                return () => document.removeEventListener('keydown', handleKeyDown);
            }, [handleKeyDown]);

            useEffect(() => {
                if (lightboxOpen) {
                    document.body.style.overflow = 'hidden';
                } else {
                    document.body.style.overflow = '';
                }
                return () => { document.body.style.overflow = ''; };
            }, [lightboxOpen]);

            return (
                <div className="kl-product-detail">
                    {/* Breadcrumb */}
                    <nav className="kl-breadcrumb">
                        <a href="/">Home</a>
                        <span className="kl-breadcrumb-sep">/</span>
                        <a href={`/brand/${brand.toLowerCase()}`}>{brand}</a>
                        <span className="kl-breadcrumb-sep">/</span>
                        <span className="kl-breadcrumb-current">{name}</span>
                    </nav>

                    <div className="kl-product-main">
                        {/* Image Gallery */}
                        <div className="kl-gallery">
                            <div className="kl-gallery-thumbnails">
                                {images.map((img, idx) => (
                                    <button
                                        key={idx}
                                        className={`kl-thumbnail ${selectedImage === idx ? 'active' : ''}`}
                                        onClick={() => setSelectedImage(idx)}
                                        aria-label={`View image ${idx + 1}`}
                                    >
                                        <img src={img} alt={`${name} view ${idx + 1}`} />
                                    </button>
                                ))}
                            </div>

                            <div
                                className={`kl-main-image ${isZoomed ? 'zoomed' : ''}`}
                                onMouseEnter={() => setIsZoomed(true)}
                                onMouseLeave={() => setIsZoomed(false)}
                                onMouseMove={handleImageHover}
                                onClick={() => setLightboxOpen(true)}
                            >
                                <div
                                    className="kl-image-container"
                                    style={isZoomed ? {
                                        backgroundImage: `url(${images[selectedImage]})`,
                                        backgroundPosition: `${zoomPosition.x}% ${zoomPosition.y}%`,
                                    } : {}}
                                >
                                    <img
                                        src={images[selectedImage]}
                                        alt={name}
                                        className={isZoomed ? 'hidden' : ''}
                                    />
                                </div>
                                <button className="kl-expand-btn" aria-label="View full size">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5">
                                        <polyline points="15 3 21 3 21 9"></polyline>
                                        <polyline points="9 21 3 21 3 15"></polyline>
                                        <line x1="21" y1="3" x2="14" y2="10"></line>
                                        <line x1="3" y1="21" x2="10" y2="14"></line>
                                    </svg>
                                </button>
                                <div className="kl-image-counter">
                                    {selectedImage + 1} / {images.length}
                                </div>
                            </div>
                        </div>

                        {/* Product Info */}
                        <div className="kl-product-info">
                            <div className="kl-info-header">
                                <p className="kl-brand">{brand}</p>
                                <h1 className="kl-product-name">{name}</h1>
                                <p className="kl-style-id">{styleId}</p>
                            </div>

                            <div className="kl-price-block">
                                <div className="kl-price-row">
                                    <span className="kl-price-current">${price.toLocaleString()}</span>
                                    {retail && retail < price && (
                                        <span className="kl-price-retail">${retail.toLocaleString()}</span>
                                    )}
                                </div>
                                {retail && retail < price && (
                                    <p className="kl-price-note">
                                        +${(price - retail).toLocaleString()} above retail
                                    </p>
                                )}
                            </div>

                            {/* Size Selector */}
                            <div className="kl-size-section">
                                <div className="kl-size-header">
                                    <span className="kl-size-label">Size</span>
                                    <button className="kl-size-guide">Size Guide</button>
                                </div>

                                {hasStock ? (
                                    <div className="kl-size-selector">
                                        <select
                                            value={selectedSize}
                                            onChange={(e) => setSelectedSize(e.target.value)}
                                            className="kl-size-dropdown"
                                        >
                                            <option value="">Select Size (US)</option>
                                            {sizes.map(({ size, available }) => (
                                                <option key={size} value={size} disabled={!available}>
                                                    US {size} {!available ? 'â€” Sold Out' : ''}
                                                </option>
                                            ))}
                                        </select>
                                        <svg className="kl-dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                            <polyline points="6 9 12 15 18 9"></polyline>
                                        </svg>
                                    </div>
                                ) : (
                                    <p className="kl-out-of-stock-msg">All sizes currently unavailable</p>
                                )}
                            </div>

                            {/* Action Buttons */}
                            <div className="kl-actions">
                                {hasStock ? (
                                    <button
                                        className={`kl-add-to-bag ${!selectedSize ? 'disabled' : ''} ${addedToBag ? 'added' : ''}`}
                                        onClick={handleAddToBag}
                                        disabled={!selectedSize}
                                    >
                                        {addedToBag ? (
                                            <>
                                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                                    <polyline points="20 6 9 17 4 12"></polyline>
                                                </svg>
                                                Added to Bag
                                            </>
                                        ) : (
                                            'Add to Bag'
                                        )}
                                    </button>
                                ) : (
                                    <>
                                        {!showNotifyForm ? (
                                            <button
                                                className="kl-notify-btn"
                                                onClick={() => setShowNotifyForm(true)}
                                            >
                                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5">
                                                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                                                </svg>
                                                Notify Me When Available
                                            </button>
                                        ) : (
                                            <form className="kl-notify-form" onSubmit={handleNotifySubmit}>
                                                <input
                                                    type="email"
                                                    placeholder="Enter your email"
                                                    value={notifyEmail}
                                                    onChange={(e) => setNotifyEmail(e.target.value)}
                                                    required
                                                    className="kl-notify-input"
                                                />
                                                <button type="submit" className="kl-notify-submit">
                                                    Notify Me
                                                </button>
                                            </form>
                                        )}
                                    </>
                                )}

                                <button className="kl-wishlist-btn">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                                    </svg>
                                </button>
                            </div>

                            {/* Trust Badges */}
                            <div className="kl-trust-badges">
                                <div className="kl-badge">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5">
                                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                                        <polyline points="9 12 11 14 15 10"></polyline>
                                    </svg>
                                    <span>Authenticity Guaranteed</span>
                                </div>
                                <div className="kl-badge">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5">
                                        <rect x="1" y="3" width="15" height="13"></rect>
                                        <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon>
                                        <circle cx="5.5" cy="18.5" r="2.5"></circle>
                                        <circle cx="18.5" cy="18.5" r="2.5"></circle>
                                    </svg>
                                    <span>Free Shipping Over $300</span>
                                </div>
                                <div className="kl-badge">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5">
                                        <polyline points="23 4 23 10 17 10"></polyline>
                                        <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
                                    </svg>
                                    <span>Easy Returns</span>
                                </div>
                            </div>

                            {/* Specs */}
                            <div className="kl-specs">
                                <h3 className="kl-specs-title">Product Details</h3>
                                <dl className="kl-specs-list">
                                    <div className="kl-spec-row">
                                        <dt>Brand</dt>
                                        <dd>{brand}</dd>
                                    </div>
                                    <div className="kl-spec-row">
                                        <dt>Model</dt>
                                        <dd>{model || name.split("'")[0].trim()}</dd>
                                    </div>
                                    <div className="kl-spec-row">
                                        <dt>Style ID</dt>
                                        <dd>{styleId}</dd>
                                    </div>
                                    <div className="kl-spec-row">
                                        <dt>Condition</dt>
                                        <dd>{condition}</dd>
                                    </div>
                                    <div className="kl-spec-row">
                                        <dt>Release Year</dt>
                                        <dd>{releaseYear}</dd>
                                    </div>
                                    <div className="kl-spec-row">
                                        <dt>Retail Price</dt>
                                        <dd>${retail?.toLocaleString()}</dd>
                                    </div>
                                </dl>
                            </div>

                            {/* Description */}
                            <div className="kl-description">
                                <h3 className="kl-description-title">About This Sneaker</h3>
                                <p className="kl-description-text">{description}</p>
                            </div>
                        </div>
                    </div>

                    {/* Related Products */}
                    {relatedProducts.length > 0 && (
                        <section className="kl-related">
                            <div className="kl-related-header">
                                <h2 className="kl-related-title">You May Also Like</h2>
                                <a href="/shop" className="kl-related-link">
                                    View All
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                        <line x1="5" y1="12" x2="19" y2="12"></line>
                                        <polyline points="12 5 19 12 12 19"></polyline>
                                    </svg>
                                </a>
                            </div>
                            <div className="kl-related-grid">
                                {relatedProducts.slice(0, 4).map((item) => (
                                    <a
                                        key={item.id}
                                        href={`/product/${item.id}`}
                                        className="kl-related-card"
                                    >
                                        <div className="kl-related-image-wrap">
                                            <img src={item.images?.[0] || item.image} alt={item.name} />
                                            {!item.inStock && (
                                                <span className="kl-related-badge">Sold Out</span>
                                            )}
                                        </div>
                                        <div className="kl-related-info">
                                            <p className="kl-related-brand">{item.brand}</p>
                                            <h3 className="kl-related-name">{item.name}</h3>
                                            <p className="kl-related-price">${item.price?.toLocaleString()}</p>
                                        </div>
                                    </a>
                                ))}
                            </div>
                        </section>
                    )}

                    {/* Lightbox */}
                    {lightboxOpen && (
                        <div className="kl-lightbox" onClick={() => setLightboxOpen(false)}>
                            <button
                                className="kl-lightbox-close"
                                onClick={() => setLightboxOpen(false)}
                                aria-label="Close"
                            >
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5">
                                    <line x1="18" y1="6" x2="6" y2="18"></line>
                                    <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                            </button>

                            <button
                                className="kl-lightbox-nav prev"
                                onClick={(e) => {
                                    e.stopPropagation();
                                    setSelectedImage((prev) => (prev - 1 + images.length) % images.length);
                                }}
                                aria-label="Previous image"
                            >
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5">
                                    <polyline points="15 18 9 12 15 6"></polyline>
                                </svg>
                            </button>

                            <div className="kl-lightbox-content" onClick={(e) => e.stopPropagation()}>
                                <img src={images[selectedImage]} alt={name} />
                            </div>

                            <button
                                className="kl-lightbox-nav next"
                                onClick={(e) => {
                                    e.stopPropagation();
                                    setSelectedImage((prev) => (prev + 1) % images.length);
                                }}
                                aria-label="Next image"
                            >
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5">
                                    <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                            </button>

                            <div className="kl-lightbox-thumbnails">
                                {images.map((img, idx) => (
                                    <button
                                        key={idx}
                                        className={`kl-lightbox-thumb ${selectedImage === idx ? 'active' : ''}`}
                                        onClick={(e) => {
                                            e.stopPropagation();
                                            setSelectedImage(idx);
                                        }}
                                    >
                                        <img src={img} alt={`View ${idx + 1}`} />
                                    </button>
                                ))}
                            </div>

                            <div className="kl-lightbox-counter">
                                {selectedImage + 1} / {images.length}
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // ========================================
        // Demo Data
        // ========================================

        const sampleProduct = {
            id: 1,
            name: "Air Jordan 4 Retro 'Red Thunder'",
            brand: "Jordan",
            model: "Air Jordan 4 Retro",
            styleId: "CT8527-016",
            price: 245,
            retail: 190,
            condition: "New",
            releaseYear: 2022,
            description: "Following similar color blocking as the Air Jordan 4 Thunder from 2012, this iteration takes the iconic silhouette in a bold new direction. The upper features a black nubuck construction with vibrant Crimson red accents on the eyelets, heel tab, and Jumpman branding. A white midsole with visible Air cushioning provides contrast, while the black rubber outsole completes the design. Released in January 2022, this sneaker quickly became a must-have for Jordan enthusiasts and collectors alike.",
            images: [
                "https://images.stockx.com/images/Air-Jordan-4-Retro-Red-Thunder-Product.jpg",
                "https://images.stockx.com/360/Air-Jordan-4-Retro-Red-Thunder/Images/Air-Jordan-4-Retro-Red-Thunder/Lv2/img01.jpg",
                "https://images.stockx.com/360/Air-Jordan-4-Retro-Red-Thunder/Images/Air-Jordan-4-Retro-Red-Thunder/Lv2/img02.jpg",
                "https://images.stockx.com/360/Air-Jordan-4-Retro-Red-Thunder/Images/Air-Jordan-4-Retro-Red-Thunder/Lv2/img03.jpg",
            ],
            sizes: [
                { size: "7", available: true },
                { size: "7.5", available: false },
                { size: "8", available: true },
                { size: "8.5", available: true },
                { size: "9", available: false },
                { size: "9.5", available: true },
                { size: "10", available: true },
                { size: "10.5", available: false },
                { size: "11", available: true },
                { size: "11.5", available: false },
                { size: "12", available: true },
                { size: "13", available: false },
            ],
            inStock: true,
        };

        // Out of stock version for testing
        const outOfStockProduct = {
            ...sampleProduct,
            id: 2,
            name: "Nike Air Max 1 Travis Scott 'Wheat'",
            brand: "Nike",
            model: "Air Max 1",
            styleId: "DO9392-700",
            price: 310,
            retail: 160,
            releaseYear: 2022,
            description: "In collaboration with Travis Scott's record label Cactus Jack, this Air Max 1 features outdoor-inspired design elements including a reverse Swoosh, premium suede and canvas construction, and a unique wheat colorway. Multiple lacing options and removable patches add customization potential.",
            images: [
                "https://images.stockx.com/images/Nike-Air-Max-1-Travis-Scott-Wheat-Product.jpg",
            ],
            sizes: [],
            inStock: false,
        };

        const relatedProducts = [
            {
                id: 3,
                name: "Yeezy Boost 350 V2 'Onyx'",
                brand: "Adidas",
                image: "https://images.stockx.com/images/adidas-Yeezy-Boost-350-V2-Onyx-Product.jpg",
                price: 275,
                inStock: false
            },
            {
                id: 4,
                name: "Air Jordan 1 High OG 'Chicago Lost & Found'",
                brand: "Jordan",
                image: "https://images.stockx.com/images/Air-Jordan-1-Retro-High-OG-Lost-and-Found-Product.jpg",
                price: 320,
                inStock: false
            },
            {
                id: 5,
                name: "Nike Dunk Low 'Panda'",
                brand: "Nike",
                image: "https://images.stockx.com/images/Nike-Dunk-Low-Retro-White-Black-2021-Product.jpg",
                price: 115,
                inStock: true
            },
            {
                id: 6,
                name: "New Balance 550 'White Green'",
                brand: "New Balance",
                image: "https://images.stockx.com/images/New-Balance-550-White-Green-Product.jpg",
                price: 135,
                inStock: true
            },
        ];

        // ========================================
        // App Wrapper with Demo Toggle
        // ========================================

        const App = () => {
            const [showOutOfStock, setShowOutOfStock] = useState(false);
            const currentProduct = showOutOfStock ? outOfStockProduct : sampleProduct;

            return (
                <div>
                    {/* Demo Toggle */}
                    <div style={{
                        position: 'fixed',
                        top: '1rem',
                        right: '1rem',
                        zIndex: 2000,
                        background: '#1a1917',
                        padding: '0.75rem 1rem',
                        borderRadius: '4px',
                        display: 'flex',
                        alignItems: 'center',
                        gap: '0.75rem',
                        fontFamily: 'system-ui, sans-serif',
                        fontSize: '0.75rem',
                        color: 'white',
                        boxShadow: '0 4px 20px rgba(0,0,0,0.3)'
                    }}>
                        <span>Demo:</span>
                        <button
                            onClick={() => setShowOutOfStock(false)}
                            style={{
                                padding: '0.4rem 0.75rem',
                                background: !showOutOfStock ? 'white' : 'transparent',
                                color: !showOutOfStock ? '#1a1917' : 'white',
                                border: '1px solid white',
                                cursor: 'pointer',
                                fontSize: '0.7rem',
                                fontWeight: 500,
                                letterSpacing: '0.05em',
                                textTransform: 'uppercase'
                            }}
                        >
                            In Stock
                        </button>
                        <button
                            onClick={() => setShowOutOfStock(true)}
                            style={{
                                padding: '0.4rem 0.75rem',
                                background: showOutOfStock ? 'white' : 'transparent',
                                color: showOutOfStock ? '#1a1917' : 'white',
                                border: '1px solid white',
                                cursor: 'pointer',
                                fontSize: '0.7rem',
                                fontWeight: 500,
                                letterSpacing: '0.05em',
                                textTransform: 'uppercase'
                            }}
                        >
                            Out of Stock
                        </button>
                    </div>

                    <ProductDetail
                        product={currentProduct}
                        relatedProducts={relatedProducts}
                        onAddToBag={(item) => {
                            console.log('Added to bag:', item);
                            alert(`Added ${item.name} (Size ${item.selectedSize}) to bag!`);
                        }}
                        onNotifyMe={(data) => {
                            console.log('Notify request:', data);
                        }}
                    />
                </div>
            );
        };

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
